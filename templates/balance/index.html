{% extends "balance/base.html" %}
{% load bootstrap5 %}
{% load static %}

{% block header %}
  <h2>Баланс</h2>
{% endblock header %}

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"> 

{% block content %}
  <form method="post" action="{% url 'balance' %}" class="form">
    {% csrf_token %}
    {% buttons %}
      <button class="btn btn-primary" name="submit">Запросить баланс</button>
    {% endbuttons %}
    <input type="hidden" name="next" value="{% url 'index' %}" />
  </form>
  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>Время</th>
        <th>Rapira</th>
        <th>Garantex</th>
        <th>Cryptomus</th>
        <th>Bybit</th>
        <th>Whitebit</th>
        <th>Заморожено</th>
        <th>Всего</th>
      </tr>
    </thead>
    <tbody>
      {% for balance in balances %}
      <tr>
        <td>
          <script>
            var serverDate = new Date("{{ balance.date_created }}");
            // var localDate = new Date(serverDate.getTime() + serverDate.getTimezoneOffset() / 60000);
            var formattedDate = serverDate.toLocaleString();
            console.log("{{ balance.date_created }}")
            console.log(serverDate)
            document.write(formattedDate);
          </script>
        </td>
        <td>{{ balance.rapira|floatformat:2 }}</td>
        <td>{{ balance.garantex|floatformat:2 }}</td>
        <td>{{ balance.cryptomus|floatformat:2 }}</td>
        <td>{{ balance.bybit|floatformat:2 }}</td>
        <td>{{ balance.whitebit|floatformat:2 }}</td>
        <td>{{ balance.locked|floatformat:2 }}</td>
        <td>{{ balance.result|floatformat:2 }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="8">Нет данных</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock content %}



